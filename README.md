---

# 1. 콘셉트

- 프로젝트 뉴 에덴
- 무인도에서 두 명의 사람이 생존하고 마을을 발전시키는 설정, 플레이어는 신이 되어 이 두 사람을 관찰하며 돕거나 방해할 수 있다.

  

# 2. 주 재미요소

### 2-1. 관찰

- 샌드박스 게임으로서 [자율 에이전트](https://www.notion.so/1e4c40369276801190a5cab312468dbd?pvs=21)들을 관찰하고 자유롭게 가지고 노는 것이 핵심 재미요소
- 에이전트들은 AI의 판단에 따라 새로운 관계를 형성하고 갈등하는 등 다양한 행동 패턴을 보일 수 있다.
- 에이전트들은 섬을 탐색하고 자원을 수집하여 생존을 도모하고 마을의 발전에 기여할 수 있다.
- 에이전트들을 신(플레이어)를 숭배하고 기도를 통해 일종의 퀘스트를 준다.

### 2-2. 개입

- 플레이어는 권능을 통해 오브젝트를 생성하거나 없애서 개입할 수 있다.
- 플레이어는 계시를 통해 프롬프트를 에이전트의 메모리에 집적 입력할 수도 있다.
- 관찰 도중 플레이어의 개입을 통해 게임에 변화를 줄 수 있다.

### 2-3. 생존과 발전

- 에이전트는 생존을 위해 먹고, 자는 등의 생명활동을 해야 한다, 이 과정에서 월드의 자원이 소모되며, 플레이어는 게임이 진행됨에 따라 무너지는 균형을 지키는 것에 기여할 수 있다.
- 에이전트는 자율 활동을 통해 꾸준히 월드 상의 자원을 모으며(나무, 광물 등) 이러한 행동을 유도할 수도 있다.
- 모은 자원을 이용하여 새로운 건물을 해금하고 마을을 발전시킬 수 있다.

# 3. 에이전트

### 3-1. AI와 행동

에이전트는 AI의 명령에 따라 [스케줄](https://www.notion.so/1e4c40369276801190a5cab312468dbd?pvs=21)을 수정하고 행동한다.

AI는 기억을 기반으로 스케줄을 생성하며 AI가 참고한 기억과 월드의 실제 환경은 차이가 있을 수 있다. 

예를 들어, 사과가 북쪽 숲 [지역](https://www.notion.so/1e4c40369276801190a5cab312468dbd?pvs=21)에 있다는 기억을 바탕으로 에이전트가 사과를 먹기 위해 북쪽 숲으로 이동했지만, 사과는 이미 없어진 후였다. 그러면 에이전트는 [반응](https://www.notion.so/1e4c40369276801190a5cab312468dbd?pvs=21)하여 스케줄을 수정하고 새로운 스케줄을 생성한다.

이런 식으로 에이전트의 행동은 실패할 수 있으며, 행동이 실패했다고 판단하면(30초간 행동을 시작 할 수 없었다거나) 반응을 유발하여 새 행동을 받아 새로운 스케줄을 생성해 행동한다.

행동을 시작하면 행동을 마치거나 스케줄상 할당된 시간이 끝날 때까지 행동을 실행하며 예상 스케줄보다 빠르게 끝난다면 대기 상태로 진입한다.(역시 오래 지속되면 반응을 유발한다.)

행동의 매개변수는 오브젝트, 상호작용, 지역으로 구성되며 행동의 순서는 이동 → 관찰 → 행동으로 이루어진다.

### 3-2. 기억

AI는 기억을 기반으로 판단을 내린다.

기억에는 생성 시간, 최근 참조 시간, 내용, 중요도 등이 매겨진다.

기억은 단순 관찰과 계획, 반성 등으로 이루어진다.

**관찰**

AI는 에이전트의 시야 내에 있는 오브젝트 정보를 바탕으로 주기적으로 기억을 생성하고
다른 에이전트와의 대화 내용, 내가 실제로 행동했던 것들 등을 메모리 스트림에 집어넣게 된다.

**계획**

하루의 시작에 기억을 기반으로 그 날의 대략적인 스케줄을 미리 생성해 놓는다, 이 스케줄은 완벽하지 않으며 사이사이 공백을 반응을 통해 메꾸고 수정하게 될 것임

실제 구현은 현재 계획을 그대로 메모리로 사용하기보다는 반응을 통해 계획을 프롬프트로 전달하고 수정하는 식으로 구현하게 될 듯.

**반성**

하루의 끝에 반성을 통해 기존의 단순한 기억을 기반으로 고차원적이고 추상적인 기억을 생성해낸다.
반성이 다른 반성들을 참조하여 더욱 고도화된 기억을 만들어내기도 한다.

반성은 에이전트 하나에 20초 이상이 걸릴 정도로 실행속도가 느릴 것으로 예상되므로 하루의 끝에 몰아서 구현한다.

### 3-3. 스케줄링

에이전트는 스케줄을 기반으로 행동한다.

스케줄은 관찰과 그로 인해 유발되는 [반응](https://www.notion.so/1e4c40369276801190a5cab312468dbd?pvs=21)으로 수정될 수 있으며, 이로 인해 스케줄이 변경되어 충돌이 발생하면 AI가 매긴 우선순위를 기반으로 충돌을 해결한다.

예를 들어 아침에 커피를 마시고 학교에 가는 스케줄이 있다고 하자, 그런데 커피가 상한 것을 확인했고 이 관찰 정보는 반응을 유발하여 커피대신 차를 마시는 것으로 스케줄이 수정되었다.

하지만 AI의 오류 또는 차를 마시는 행동이 시간이 많이 걸려 학교 등교와 스케줄이 겹치게 되었다.
이러한 경우, 우선순위가 더 낮은 차를 마시는 행위는 겹치는 시간만큼 할당된 시간이 짤리게 된다.

이런 식으로 반응에 의한 스케줄 수정은 현재 행동 밖의 미래의 계획까지 고려하지는 못하지만 더 중요한 스케줄이 덮어씌워지면서 현실적인 행동 패턴을 구현한다.

### 3-4. 반응

에이전트가 행동하는 도중, 반응을 통해 현재 행동을 취소하고 새로운 스케줄을 생성할지 결정할 수 있다.

현재 관찰 결과가 반응을 유발할 것인지는 AI에게 Bool타입 출력 요청을 통해 빠르게 판단하고 만일 반응을 유발한다면 스케줄을 어떻게 수정할 것인지 다시 AI에게 판단 요청을 보내고 그 동안 에이전트는 [!] 아이콘을 띄우고  대기 상태로 돌입한다.

반응은 내부적으로 흥미도를 측정하여 임계치 이상이면 AI에게 반응 판단 요청을 보내는 식으로 구현

흥미도는 시야 내의 관찰 결과를 바탕으로 측정되며 흥미도와 반응을 유발하는 케이스들은 다음과 같다.

1. 시야 내에 권능 사용(에이전트가 인식할 수 있는 어떤 것이든) - 즉시 반응 유발
2. 다른 에이전트의 상호작용 요청 - 즉시 반응 유발
3. 감정의 변화 - 즉시 반응 유발
4. 에이전트가 처음 보는 종류의 오브젝트 발견 - 높은 흥미도5
5. 새로운 지역 발견 - 높은 흥미도5
6. 에이전트가 선호하는 오브젝트 관찰(다른 에이전트 포함) - 높은 흥미도 3
7. 다른 에이전트 관찰 - 다른 오브젝트보다 더 높은 흥미도 기본값 1
8. 에이전트가 처음 보는 오브젝트 발견(오브젝트별로) - 흥미 유발 1 

### 3-5. 지역

지역은 미리 지정된 범위로 구분되며, AI가 판단하는 플레이어의 현재 위치, 목적지 위치 등에 활용된다.

가령 북쪽 숲에 사과를 주으러 간다는 스케줄이 있다면, 일단 사과의 존재 여부나 정확한 위치를 모르기 때문에 에이전트는 북쪽 숲으로 이동 → 도착하면 가장 가까운 사과로 이동 → 사과와 상호작용 순서로 하나의 행동이 진행된다. 만일 지역 내에 사과가 없다면 행동 실패로 반응이 발생한다.  

이 과정 중간에도 당연히 반응이 발생할 수 있다.

마을 건물은 처음 선택한 지역에만 건설할 수 있으며 지역 → 건물 → 오브젝트의 관계가 형성됨.

# 4. 권능